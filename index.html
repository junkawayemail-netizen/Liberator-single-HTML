
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Liberator Junk Removal</title>
    <meta name="description" content="Elite junk removal operations in the Bay Area." />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-blue': 'rgb(var(--color-brand-blue) / <alpha-value>)',
              'brand-green': 'rgb(var(--color-brand-green) / <alpha-value>)',
              'brand-light': 'rgb(var(--color-brand-light) / <alpha-value>)',
              'brand-dark': 'rgb(var(--color-brand-dark) / <alpha-value>)',
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              heading: ['Montserrat', 'sans-serif'],
            },
            backgroundImage: {
              'hero-pattern': "url('https://images.unsplash.com/photo-1503174971373-b1f69850bded?q=80&w=1600&auto=format&fit=crop')",
              'subtle-gradient': "radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 50%), radial-gradient(circle at 80% 90%, rgba(220, 230, 250, 0.4) 0%, rgba(220, 230, 250, 0) 40%)"
            }
          }
        }
      }
    </script>
    
    <!-- Config Loading -->
    <script src="config.js"></script>
    
    <!-- Babel Standalone for in-browser JSX/TS compilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      :root {
        /* Default Theme: Arctic Ops (RGB values for opacity support) */
        --color-brand-blue: 71 85 105;   /* Slate 600 */
        --color-brand-green: 14 165 233; /* Sky 500 */
        --color-brand-light: 255 255 255;
        --color-brand-dark: 15 23 42;    /* Slate 900 */
      }

      body {
        background-color: rgb(var(--color-brand-light));
        background-attachment: fixed;
        transition: background-color 0.5s ease;
      }
      
      /* Smooth transition for color changes */
      *, *::before, *::after {
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, box-shadow;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 300ms;
      }

      /* Custom scrollbar for webkit */
      ::-webkit-scrollbar {
        width: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 5px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      
      .animate-spin-slow {
        animation: spin 3s linear infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    </style>
    
    <script type="importmap">
    {
      "imports": {
        "framer-motion": "https://aistudiocdn.com/framer-motion@^12.23.25",
        "react": "https://aistudiocdn.com/react@^19.2.1",
        "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.1/client",
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.31.0"
      }
    }
    </script>
  </head>
  <body class="text-brand-dark bg-subtle-gradient">
    <div id="root"></div>

    <script type="text/babel" data-type="module" data-presets="typescript,react">
      import React, { useState, useEffect, useRef, createContext, useContext } from 'react';
      import ReactDOM from 'react-dom/client';
      import { motion, AnimatePresence } from 'framer-motion';
      import { GoogleGenAI } from "@google/genai";

      // --- CONFIGURATION ---
      window.process = window.process || {};
      window.process.env = window.process.env || {};

      if (window.LIBERATOR_API_KEY) {
        window.process.env.API_KEY = window.LIBERATOR_API_KEY;
      }
      if (window.GOOGLE_API_KEY) {
        window.process.env.API_KEY = window.GOOGLE_API_KEY;
      } 

      // Helper to get API key safely
      const getApiKey = () => {
        const apiKey =
          (window.process &&
            window.process.env &&
            window.process.env.API_KEY) ||
          window.GOOGLE_API_KEY || 
          window.LIBERATOR_API_KEY;

        if (!apiKey) {
          console.error("No Gemini API key found on window.process.env.API_KEY, window.GOOGLE_API_KEY or window.LIBERATOR_API_KEY");
          return null;
        }
        return apiKey;
      };

      // --- CONSTANTS ---
      const NAV_LINKS = [
        { href: "#pricing", label: "Pricing" },
        { href: "#services", label: "Services" },
        { href: "#work", label: "Our Work" },
        { href: "#reviews", label: "Intel" },
        { href: "#about", label: "Why Us" },
        { href: "#contact", label: "Contact" }
      ];

      const PRICING_PLANS = [
        { title: "Single Item", price: "$99+", description: "Perfect for a mattress, sofa, or appliance.", },
        { title: "1/4 Truck Load", price: "$249", description: "Fits about 2 pickup truck beds of junk.", },
        { title: "1/2 Truck Load", price: "$399", description: "Our most common choice for bigger cleanouts.", popular: true, },
        { title: "Full Truck", price: "$599", originalPrice: "$799", promo: "Save $200", description: "Seasonal special for entire estate, garage, or office cleanouts.", },
      ];

      const HEAVY_ITEMS_SURCHARGES = [
        { item: "Piano (Upright)", price: "+$250 surcharge" },
        { item: "Piano (Grand)", price: "+$450 surcharge" },
        { item: "Pool Table", price: "+$300 surcharge" },
        { item: "Hot Tub", price: "+$350 surcharge" },
        { item: "Safe (Heavy)", price: "+$200 surcharge" },
        { item: "Construction Debris (Dense)", price: "Custom Quote (Heavy Load)" }
      ];

      const SERVICES = [
        { title: "Turnover Cleanouts", iconPath: "M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z" },
        { title: "Furniture Removal", iconPath: "M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" },
        { title: "Appliance Recycling", iconPath: "M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" },
        { title: "Yard Waste Disposal", iconPath: "M14.121 15.121A3 3 0 0112 16.5c-1.282 0-2.45-.8-2.873-2.022M7.5 7.5a3 3 0 013-3h3a3 3 0 01-3 3h-3a3 3 0 01-3-3v-3z" },
        { title: "Construction Debris", iconPath: "M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" },
        { title: "E-Waste Recycling", iconPath: "M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" },
        { title: "General Junk", iconPath: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" },
        { title: "Move Out Cleaning", iconPath: "M10 3L7.5 7.5 3 10l4.5 2.5L10 17l2.5-4.5L17 10l-4.5-2.5z" }
      ];

      const WORK_EXAMPLES = [
        { title: "Garage Cleanout", beforeImg: "https://images.unsplash.com/photo-1596484552993-84192dd21726?q=80&w=600&auto=format&fit=crop", afterImg: "https://images.unsplash.com/photo-1533090161767-e6ffed986c88?q=80&w=600&auto=format&fit=crop" },
        { title: "Backyard Debris", beforeImg: "https://images.unsplash.com/photo-1621255556201-923f7956424e?q=80&w=600&auto=format&fit=crop", afterImg: "https://images.unsplash.com/photo-1558904541-efa843a96f01?q=80&w=600&auto=format&fit=crop" },
        { title: "Estate Liquidation", beforeImg: "https://images.unsplash.com/photo-1605518216938-7f31b8af7880?q=80&w=600&auto=format&fit=crop", afterImg: "https://images.unsplash.com/photo-1502005229762-cf1b2da7c5d6?q=80&w=600&auto=format&fit=crop" },
        { title: "Hoarder Room", beforeImg: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?q=80&w=600&auto=format&fit=crop", afterImg: "https://images.unsplash.com/photo-1507089947368-19c1da9775ae?q=80&w=600&auto=format&fit=crop" },
        { title: "Basement Purge", beforeImg: "https://images.unsplash.com/photo-1526367790999-0150786686a2?q=80&w=600&auto=format&fit=crop", afterImg: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=600&auto=format&fit=crop" },
        { title: "Office Liquidation", beforeImg: "https://images.unsplash.com/photo-1627916607164-7b5267ad824f?q=80&w=600&auto=format&fit=crop", afterImg: "https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=600&auto=format&fit=crop" }
      ];

      const JUNK_TARGETS = [
        { name: "Sofa / Armchair", imgSrc: "https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=600&auto=format&fit=crop" },
        { name: "Upright Piano", imgSrc: "https://images.unsplash.com/photo-1520523830771-70e3bf3c716c?q=80&w=600&auto=format&fit=crop" },
        { name: "Mattress", imgSrc: "https://images.unsplash.com/photo-1631049552057-403cdb8f0658?q=80&w=600&auto=format&fit=crop" },
        { name: "Old Appliances", imgSrc: "https://images.unsplash.com/photo-1571175443880-49e1d58b794a?q=80&w=600&auto=format&fit=crop" },
        { name: "Pool Table", imgSrc: "https://images.unsplash.com/photo-1596426724673-94c633bc0c94?q=80&w=600&auto=format&fit=crop" },
        { name: "Construction Debris", imgSrc: "https://images.unsplash.com/photo-1518709594023-6eab9bab7b23?q=80&w=600&auto=format&fit=crop" }
      ];

      const TEAM = [
        { imgSrc: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=400&auto=format&fit=crop", name: 'Alex "Commander" Chen', role: "Founder & Lead Strategist" },
        { imgSrc: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=400&auto=format&fit=crop", name: 'Maria "Breaker" Garcia', role: "Operations Specialist" },
        { imgSrc: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=400&auto=format&fit=crop", name: 'Sam "Gadget" Jones', role: "Eco-Disposal Expert" },
        { imgSrc: "https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=400&auto=format&fit=crop", name: "Jessica Riley", role: "Customer Relations" }
      ];

      const TESTIMONIALS = [
        { id: 1, name: "Sarah Jenkins", location: "Mission District", rating: 5, text: "Liberator arrived at 0800 hours sharp. The squad cleared my garage in under 45 minutes. Total tactical victory over clutter." },
        { id: 2, name: "Mike Ross", location: "Oakland", rating: 5, text: "I needed a quick deployment for an office cleanout. The team was disciplined, efficient, and left the area spotless. Highly recommend." },
        { id: 3, name: "Elena V.", location: "Daly City", rating: 5, text: "Price was exactly as estimated by the General. No hidden fees, no civilian nonsense. Just pure results." }
      ];

      const FAQS = [
        { question: "What is your deployment range?", answer: "We operate throughout the entire San Francisco Bay Area, including SF proper, East Bay, Peninsula, and Marin. If you're on the map, we can reach you." },
        { question: "Do you handle hazardous materials (HazMat)?", answer: "Negative. We are not equipped for biohazards, paint, oil, or asbestos. We can only neutralize standard junk, furniture, and e-waste." },
        { question: "How fast can you mobilize?", answer: "We offer same-day and next-day deployment in most sectors. Call us before 1000 hours for the best chance of same-day service." },
        { question: "Do I need to be on-site for the operation?", answer: "Not necessarily. If the target payload is accessible (curbside or driveway), we can execute the mission remotely and send you photographic confirmation of the neutralized area." }
      ];

      // --- ADMIN CONTEXT ---
      const AdminContext = createContext(undefined);

      const AdminProvider = ({ children }) => {
        const [isAdmin, setIsAdmin] = useState(false);
        const [images, setImages] = useState({});

        useEffect(() => {
          const savedImages = localStorage.getItem('site_images');
          if (savedImages) {
            setImages(JSON.parse(savedImages));
          }
          const session = localStorage.getItem('admin_session');
          if (session === 'active') setIsAdmin(true);
        }, []);

        const login = (password) => {
          if (password === 'ComeInsideMeNow609') {
            setIsAdmin(true);
            localStorage.setItem('admin_session', 'active');
            return true;
          }
          return false;
        };

        const logout = () => {
          setIsAdmin(false);
          localStorage.removeItem('admin_session');
        };

        const updateImage = (key, base64) => {
          const newImages = { ...images, [key]: base64 };
          setImages(newImages);
          localStorage.setItem('site_images', JSON.stringify(newImages));
        };

        return (
          <AdminContext.Provider value={{ isAdmin, login, logout, images, updateImage }}>
            {children}
          </AdminContext.Provider>
        );
      };

      const useAdmin = () => {
        const context = useContext(AdminContext);
        if (!context) {
          throw new Error('useAdmin must be used within an AdminProvider');
        }
        return context;
      };

      // --- COMPONENTS ---
      
      const Logo = ({ size = 48, className = "" }) => (
        <svg width={size} height={size} viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" className={className}>
          <g>
            <path d="M48 42 H 58 L 60 30 L 56 22 H 48 Z" fill="#2D3748" /> 
            <path d="M50 24 H 55 L 57 29 H 50 Z" fill="#A0AEC0" /> 
            <path d="M4 20 L 10 42 H 46 V 16 H 4 Z" fill="#4A5568" /> 
            <path d="M4 20 L 46 16" stroke="rgb(var(--color-brand-green))" strokeWidth="2" /> 
            <path d="M14 42 L 18 42 L 20 46 L 12 46 Z" fill="#2D3748" /> 
            <path d="M12 26 H 40" stroke="rgb(var(--color-brand-green))" strokeWidth="4" />
            <path d="M14 34 H 36" stroke="rgb(var(--color-brand-blue))" strokeWidth="2" />
            <circle cx="16" cy="46" r="6" fill="#1A202C" />
            <circle cx="16" cy="46" r="3" fill="#718096" />
            <circle cx="28" cy="46" r="6" fill="#1A202C" /> 
            <circle cx="28" cy="46" r="3" fill="#718096" />
            <circle cx="52" cy="46" r="6" fill="#1A202C" />
            <circle cx="52" cy="46" r="3" fill="#718096" />
          </g>
        </svg>
      );

      const IconQuote = () => <svg className="w-12 h-12 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.621-3.75a11.955 11.955 0 01-2.978-5.472A11.959 11.959 0 0112 2.75z"/></svg>;
      const IconTruck = () => <svg className="w-12 h-12 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10l2 2h8l2-2z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M13 16h2a1 1 0 001-1V7a1 1 0 00-1-1h-2" /></svg>;
      const IconBroom = () => <svg className="w-12 h-12 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>;
      const IconCheck = () => <svg className="w-6 h-6 text-white bg-brand-green rounded-full p-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7"/></svg>;

      // Common
      const Section = ({ id, className = "", children }) => <section id={id} className={`py-12 md:py-20 ${className}`}>{children}</section>;
      
      const Reveal = ({ children, delay = 0, width = "100%" }) => (
        <div style={{ width, overflow: "hidden" }}>
          <motion.div variants={{ hidden: { opacity: 0, y: 75 }, visible: { opacity: 1, y: 0 }, }} initial="hidden" whileInView="visible" viewport={{ once: true }} transition={{ duration: 0.5, delay: delay }}>
            {children}
          </motion.div>
        </div>
      );

      const CollapsibleSection = ({ id, title, subtitle, className = "", children }) => {
        const [isOpen, setIsOpen] = useState(false);
        return (
          <section id={id} className={`py-8 md:py-12 ${className} border-b border-gray-100`}>
            <div className="container mx-auto px-6">
              <button onClick={() => setIsOpen(!isOpen)} className="w-full flex items-center justify-between group focus:outline-none">
                <div className="text-left">
                   <h2 className="text-2xl md:text-3xl font-extrabold font-heading text-brand-blue flex items-center gap-3">
                     {title}
                     {!isOpen && <span className="text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-md font-normal uppercase tracking-wider hidden md:inline-block">Click to Expand</span>}
                   </h2>
                   {subtitle && <p className="text-gray-500 mt-1 text-sm md:text-base group-hover:text-brand-green transition-colors">{subtitle}</p>}
                </div>
                <div className={`p-2 rounded-full border transition-all duration-300 ${isOpen ? 'bg-brand-blue text-white rotate-180' : 'bg-white text-brand-blue border-gray-300 group-hover:border-brand-blue'}`}>
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" /></svg>
                </div>
              </button>
              <AnimatePresence>
                {isOpen && (
                  <motion.div initial={{ height: 0, opacity: 0 }} animate={{ height: "auto", opacity: 1 }} exit={{ height: 0, opacity: 0 }} transition={{ duration: 0.4, ease: "easeInOut" }} className="overflow-hidden">
                    <div className="pt-12 pb-4">{children}</div>
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
          </section>
        );
      };

      const EditableImage = ({ imageKey, defaultSrc, alt, className }) => {
        const { isAdmin, images, updateImage } = useAdmin();
        const fileInputRef = useRef(null);
        const currentSrc = images[imageKey] || defaultSrc;
        const handleFileChange = (e) => {
          if (e.target.files && e.target.files[0]) {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onloadend = () => updateImage(imageKey, reader.result);
            reader.readAsDataURL(file);
          }
        };
        return (
          <div className={`relative group ${className}`}>
            <img src={currentSrc} alt={alt} className="w-full h-full object-cover" />
            {isAdmin && (
              <div className="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer z-20" onClick={() => fileInputRef.current?.click()}>
                <div className="bg-brand-green text-white px-4 py-2 rounded-full font-bold text-sm flex items-center shadow-lg border-2 border-white">Change Image</div>
                <input type="file" ref={fileInputRef} onChange={handleFileChange} className="hidden" accept="image/*" />
              </div>
            )}
            {isAdmin && <div className="absolute top-2 right-2 bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded shadow z-20 pointer-events-none">EDIT MODE</div>}
          </div>
        );
      };

      // --- LAYOUT COMPONENTS ---
      
      const ThemeToggle = () => {
        const [isOpen, setIsOpen] = useState(false);
        const [activeTheme, setActiveTheme] = useState('arctic');
        const [isAuto, setIsAuto] = useState(true);
        const dropdownRef = useRef(null);
        
        const THEMES_CONFIG = [
          { id: 'arctic', name: 'Arctic Ops', colors: { blue: '71 85 105', green: '14 165 233', light: '255 255 255', dark: '15 23 42' } },
          { id: 'aerospace', name: 'Aerospace', colors: { blue: '93 138 168', green: '124 185 232', light: '240 248 255', dark: '27 38 49' } },
          { id: 'ghost', name: 'Ghost Protocol', colors: { blue: '71 85 105', green: '100 116 139', light: '248 250 252', dark: '51 65 85' } },
          { id: 'standard', name: 'Standard', colors: { blue: '13 44 84', green: '40 167 69', light: '244 247 246', dark: '33 37 41' } },
          { id: 'desert', name: 'Desert Ops', colors: { blue: '78 52 46', green: '130 119 23', light: '245 245 220', dark: '62 39 35' } },
          { id: 'crimson', name: 'Crimson Guard', colors: { blue: '45 45 45', green: '211 47 47', light: '250 250 250', dark: '0 0 0' } },
        ];

        useEffect(() => {
          const handleClickOutside = (event) => { if (dropdownRef.current && !dropdownRef.current.contains(event.target)) setIsOpen(false); };
          document.addEventListener('mousedown', handleClickOutside); return () => document.removeEventListener('mousedown', handleClickOutside);
        }, []);

        useEffect(() => {
          const theme = THEMES_CONFIG.find(t => t.id === activeTheme);
          if (theme) {
            const root = document.documentElement;
            root.style.setProperty('--color-brand-blue', theme.colors.blue);
            root.style.setProperty('--color-brand-green', theme.colors.green);
            root.style.setProperty('--color-brand-light', theme.colors.light);
            root.style.setProperty('--color-brand-dark', theme.colors.dark);
          }
        }, [activeTheme]);

        useEffect(() => {
          if (!isAuto) return;
          const checkTime = () => {
            const now = new Date();
            const month = now.getMonth(); 
            if (month === 11 || month <= 2) setActiveTheme('arctic');
            else { const day = now.getDate(); setActiveTheme(THEMES_CONFIG[day % THEMES_CONFIG.length].id); }
          };
          checkTime(); const interval = setInterval(checkTime, 3600000); return () => clearInterval(interval);
        }, [isAuto]);

        return (
          <div className="relative" ref={dropdownRef}>
            <button onClick={() => setIsOpen(!isOpen)} className="flex items-center space-x-2 px-3 py-1.5 rounded-full border border-gray-300 bg-white/50 hover:bg-white text-brand-dark transition-all" title="Tactical Themes">
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>
              <span className="hidden xl:inline text-xs font-bold uppercase tracking-wider">Theme</span>
            </button>
            <AnimatePresence>
              {isOpen && (
                <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 10 }} className="absolute top-full right-0 mt-2 bg-white/90 backdrop-blur-xl p-3 rounded-lg shadow-xl border border-gray-200 flex flex-col space-y-2 w-56 max-h-[80vh] overflow-y-auto z-[100]">
                  <div className="flex justify-between items-center px-2 py-1 mb-1 border-b border-gray-200/50">
                     <p className="text-xs font-bold text-gray-600 uppercase tracking-wider">Mission Theme</p>
                     <button onClick={() => setIsAuto(!isAuto)} className={`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase transition-colors ${isAuto ? 'bg-brand-green text-white' : 'bg-gray-200 text-gray-500'}`}>{isAuto ? 'Auto' : 'Manual'}</button>
                  </div>
                  {THEMES_CONFIG.map((theme) => (
                    <button key={theme.id} onClick={() => { setIsAuto(false); setActiveTheme(theme.id); setIsOpen(false); }} className={`flex items-center space-x-3 p-2 rounded-md transition-all w-full ${activeTheme === theme.id ? 'bg-white/80 shadow-sm' : 'hover:bg-white/50'}`}>
                      <div className="w-6 h-6 rounded-full border border-gray-300 shadow-sm flex-shrink-0" style={{ background: `linear-gradient(135deg, rgb(${theme.colors.blue}) 50%, rgb(${theme.colors.green}) 50%)` }} />
                      <span className="text-sm font-medium text-brand-dark text-left flex-grow">{theme.name}</span>
                    </button>
                  ))}
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        );
      };

      const Snowfall = ({ isEnabled }) => {
        const canvasRef = useRef(null);
        useEffect(() => {
          if (!isEnabled || !canvasRef.current) return;
          const canvas = canvasRef.current;
          const ctx = canvas.getContext('2d');
          let width = window.innerWidth;
          let height = window.innerHeight;
          const setSize = () => { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; };
          setSize();
          const maxFlakes = 100;
          const flakes = [];
          for (let i = 0; i < maxFlakes; i++) flakes.push({ x: Math.random() * width, y: Math.random() * height, r: Math.random() * 3 + 1, d: Math.random() * maxFlakes, opacity: Math.random() * 0.5 + 0.3 });
          let angle = 0; let animationFrameId;
          const draw = () => {
            ctx.clearRect(0, 0, width, height); angle += 0.01;
            for (let i = 0; i < maxFlakes; i++) {
              const f = flakes[i]; f.y += Math.cos(angle + f.d) + 1 + f.r / 2; f.x += Math.sin(angle) * 2;
              if (f.x > width + 5 || f.x < -5 || f.y > height) {
                if (i % 3 > 0) flakes[i] = { x: Math.random() * width, y: -10, r: f.r, d: f.d, opacity: f.opacity };
                else { if (Math.sin(angle) > 0) flakes[i] = { x: -5, y: Math.random() * height, r: f.r, d: f.d, opacity: f.opacity }; else flakes[i] = { x: width + 5, y: Math.random() * height, r: f.r, d: f.d, opacity: f.opacity }; }
              }
              ctx.fillStyle = `rgba(255, 255, 255, ${f.opacity})`; ctx.beginPath(); ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true); ctx.fill();
            }
            animationFrameId = requestAnimationFrame(draw);
          };
          draw(); window.addEventListener('resize', setSize); return () => { window.removeEventListener('resize', setSize); cancelAnimationFrame(animationFrameId); };
        }, [isEnabled]);
        if (!isEnabled) return null;
        return <canvas ref={canvasRef} className="fixed inset-0 z-[60] pointer-events-none" style={{ pointerEvents: 'none' }} />;
      };

      const Header = ({ isWinter, showSnow, onToggleSnow, onOpenEstimator }) => {
        const [isOpen, setIsOpen] = useState(false);
        const handleNavClick = (e, href) => {
          e.preventDefault(); setIsOpen(false);
          setTimeout(() => {
            const targetId = href.replace('#', '');
            const element = document.getElementById(targetId);
            if (element) {
              const headerOffset = 80;
              const elementPosition = element.getBoundingClientRect().top;
              const offsetPosition = elementPosition + window.scrollY - headerOffset;
              window.scrollTo({ top: offsetPosition, behavior: "smooth" });
            }
          }, 150);
        };
        const handleQuoteClick = (e) => {
          e.preventDefault();
          setIsOpen(false);
          onOpenEstimator();
        };
        return (
          <header className="bg-white/95 backdrop-blur-md sticky top-0 z-50 shadow-md border-b border-gray-100 transition-all duration-300">
            <div className="container mx-auto px-6 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-3 cursor-pointer" onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}>
                  <Logo size={48} />
                  <div><span className="font-heading text-2xl font-bold text-brand-blue block leading-tight">LIBERATOR</span><span className="text-[10px] text-gray-500 font-medium tracking-wider uppercase">Junk Removal Operations</span></div>
                </div>
                <nav className="hidden md:flex items-center space-x-6 lg:space-x-8">
                  <div className="flex items-center space-x-2">
                    {isWinter && (
                      <button onClick={onToggleSnow} className={`flex items-center space-x-2 px-3 py-1.5 rounded-full border transition-all ${showSnow ? 'bg-red-500/10 border-red-500 text-red-500' : 'bg-gray-100 border-gray-300 text-gray-400'}`}>
                        <svg className={`w-5 h-5 ${showSnow ? 'animate-spin' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                        <span className="text-xs font-bold uppercase">{showSnow ? "Merry Christmas" : "Let It Snow"}</span>
                      </button>
                    )}
                    <ThemeToggle />
                  </div>
                  {NAV_LINKS.map((link) => (
                    <a key={link.href} href={link.href} onClick={(e) => handleNavClick(e, link.href)} className="text-brand-dark font-medium hover:text-brand-green transition-colors duration-300 text-sm lg:text-base">{link.label}</a>
                  ))}
                  <button onClick={handleQuoteClick} className="bg-brand-green/20 backdrop-blur-xl border border-white/40 text-brand-dark font-bold py-2 px-6 rounded-full hover:bg-brand-green/30 hover:shadow-[0_0_15px_rgba(255,255,255,0.4)] transition-all duration-300 transform hover:scale-105 shadow-md whitespace-nowrap">Free Quote</button>
                </nav>
                <div className="md:hidden flex items-center space-x-2">
                  <ThemeToggle />
                  {isWinter && (
                    <button onClick={onToggleSnow} className={`p-2 rounded-full border transition-all ${showSnow ? 'bg-red-500/10 border-red-500 text-red-500' : 'bg-white/50 border-gray-300 text-gray-400'}`}>
                       <svg className={`w-5 h-5 ${showSnow ? 'animate-spin' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    </button>
                  )}
                  <button onClick={() => setIsOpen(!isOpen)} className="text-brand-blue focus:outline-none p-2">
                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={isOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16m-7 6h7"} /></svg>
                  </button>
                </div>
              </div>
              <AnimatePresence>
                {isOpen && (
                  <motion.div initial={{ height: 0, opacity: 0 }} animate={{ height: "auto", opacity: 1 }} exit={{ height: 0, opacity: 0 }} className="md:hidden mt-4 overflow-hidden">
                    <nav className="flex flex-col space-y-4 pb-4">
                      {NAV_LINKS.map((link) => <button key={link.href} onClick={(e) => handleNavClick(e, link.href)} className="text-brand-dark font-medium hover:text-brand-green transition-colors duration-300 text-center py-2 w-full block bg-transparent">{link.label}</button>)}
                      <button onClick={handleQuoteClick} className="bg-brand-green/20 backdrop-blur-xl border border-white/40 text-brand-dark font-bold py-3 px-6 rounded-full hover:bg-brand-green/30 transition-colors duration-300 text-center shadow-lg w-full">Free Quote</button>
                    </nav>
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
          </header>
        );
      };

      const Hero = ({ onOpenEstimator }) => (
        <section className="relative bg-brand-light text-brand-dark py-20 md:py-32 overflow-hidden border-b border-gray-200">
          <div className="absolute inset-0 bg-cover bg-center opacity-5 bg-hero-pattern" style={{ filter: 'grayscale(100%)' }} />
          <div className="container mx-auto px-6 text-center relative z-10">
            <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.8 }}>
              <h1 className="text-4xl md:text-6xl font-extrabold font-heading mb-4 leading-tight text-brand-blue">
                Vanquish Your Clutter. <br className="hidden md:block"/>Reclaim Your Freedom.
              </h1>
              <p className="text-lg md:text-xl max-w-3xl mx-auto mb-8 text-gray-600">
                Liberator is your elite squad for junk removal, waging war on unwanted items with tactical speed and precision.
              </p>
              <motion.button 
                onClick={onOpenEstimator}
                className="bg-brand-green/20 backdrop-blur-xl text-brand-dark border border-white/40 font-bold py-4 px-10 rounded-full text-lg hover:bg-brand-green/30 transition-all duration-300 inline-flex items-center space-x-2 shadow-lg hover:shadow-[0_0_20px_rgba(255,255,255,0.4)] transform hover:-translate-y-1"
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
              >
                <span>Get Your Free Quote</span>
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </motion.button>
            </motion.div>
          </div>
        </section>
      );

      const Process = () => {
        const ProcessStep = ({ icon, title, description, stepNumber }) => (
          <div className="relative text-center p-8 bg-white/60 backdrop-blur-xl rounded-2xl shadow-lg border border-white/50 h-full transform hover:-translate-y-2 transition-all duration-300 group z-10">
            <div className="absolute -top-6 left-1/2 transform -translate-x-1/2 w-12 h-12 bg-brand-dark text-white rounded-full flex items-center justify-center font-bold font-heading text-xl shadow-lg border-4 border-white/50 z-20">
              {stepNumber}
            </div>
            <div className="flex items-center justify-center h-24 w-24 rounded-full bg-brand-green/10 text-brand-green mx-auto mb-6 group-hover:bg-brand-green group-hover:text-white transition-colors duration-300">
              {icon}
            </div>
            <h3 className="text-2xl font-bold font-heading text-brand-blue mb-3">{title}</h3>
            <p className="text-gray-600 leading-relaxed">{description}</p>
          </div>
        );
        return (
          <Section className="bg-transparent">
            <div className="container mx-auto px-6">
              <div className="text-center mb-16">
                <Reveal>
                  <span className="text-brand-green font-bold uppercase tracking-widest text-sm mb-2 block">How It Works</span>
                  <h2 className="text-3xl md:text-5xl font-extrabold font-heading text-brand-blue">Our 3-Step Battle Plan</h2>
                  <p className="text-lg text-gray-600 mt-4 max-w-2xl mx-auto">Reclaiming your space is a decisive victory. We make it simple.</p>
                </Reveal>
              </div>
              <div className="relative">
                <div className="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gradient-to-r from-transparent via-brand-green/20 to-transparent transform -translate-y-1/2 z-0"></div>
                <div className="grid md:grid-cols-3 gap-12 md:gap-8 relative z-10">
                  <Reveal delay={0.1}>
                    <div className="pt-8 h-full"><ProcessStep stepNumber={1} icon={<IconQuote />} title="Get a Quote" description="Call us or fill out our online form. We'll give you a free, no-obligation estimate based on your targets." /></div>
                  </Reveal>
                  <Reveal delay={0.2}>
                    <div className="pt-8 h-full"><ProcessStep stepNumber={2} icon={<IconTruck />} title="We Deploy" description="Our disciplined and efficient squad will arrive on schedule, ready for the mission. We handle all the heavy lifting." /></div>
                  </Reveal>
                  <Reveal delay={0.3}>
                    <div className="pt-8 h-full"><ProcessStep stepNumber={3} icon={<IconBroom />} title="Objective Cleared" description="We neutralize the clutter and sweep the area. You reclaim your territory, hassle-free." /></div>
                  </Reveal>
                </div>
              </div>
            </div>
          </Section>
        );
      };

      const AIEstimator = ({ onBookNow }) => {
        const [description, setDescription] = useState('');
        const [image, setImage] = useState(null);
        const [imagePreview, setImagePreview] = useState(null);
        const [loading, setLoading] = useState(false);
        const [result, setResult] = useState(null);
        const fileInputRef = useRef(null);

        const handleFileChange = (e) => {
          if (e.target.files && e.target.files[0]) {
            const file = e.target.files[0];
            setImage(file);
            const reader = new FileReader();
            reader.onloadend = () => setImagePreview(reader.result);
            reader.readAsDataURL(file);
          }
        };

        const generateEstimate = async () => {
          if (!description && !image) return;

          const apiKey = getApiKey();
          if (!apiKey) {
            setResult("Missing API key in browser – check config.js / GitHub secret.");
            return;
          }

          setLoading(true);
          setResult(null);

          try {
            const ai = new GoogleGenAI({ apiKey });
            const parts = []; if (image) { const reader = new FileReader(); await new Promise(r => { reader.onloadend = () => { parts.push({ inlineData: { data: reader.result.split(',')[1], mimeType: image.type } }); r(); }; reader.readAsDataURL(image); }); }
            parts.push({ text: `Analyze intel. Estimate junk removal cost for: ${description}. Check for heavy items (concrete/piano) and add $0.20/lb surcharge. Show base + surcharge math.` });
            const response = await ai.models.generateContent({ model: 'gemini-2.5-flash', contents: { parts }, config: { systemInstruction: 'You are "The General". Concise. Show the math.', thinkingConfig: { thinkingBudget: 0 } } });
            setResult(response.text);
          } catch (e) {
            console.error("Gemini API error:", e);
            setResult("AI error – see console for details (check DevTools).");
          } finally {
            setLoading(false);
          }
        };
        return (
          <Section className="bg-brand-blue/90 backdrop-blur-sm border-y border-white/10 relative overflow-hidden text-white">
            <div className="container mx-auto px-6 relative z-10">
              <Reveal><div className="text-center mb-10"><span className="bg-white/20 border border-white/30 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-3 inline-block shadow-sm">Classified Intel</span><h2 className="text-3xl md:text-4xl font-extrabold font-heading text-white">Strategic Cost Estimator</h2><p className="text-lg text-blue-100 mt-4 max-w-2xl mx-auto">Upload visual intel or description.</p></div></Reveal>
              <Reveal delay={0.1}>
                <div className="max-w-2xl mx-auto bg-white/10 backdrop-blur-md rounded-xl shadow-2xl overflow-hidden border border-white/20 p-8 flex flex-col space-y-6">
                    <div onClick={() => fileInputRef.current?.click()} className="border-2 border-dashed rounded-lg p-6 text-center cursor-pointer h-48 flex flex-col items-center justify-center bg-white/5 border-blue-200/30 hover:border-white hover:bg-white/10"><input type="file" ref={fileInputRef} onChange={handleFileChange} className="hidden" accept="image/*" />{imagePreview ? <img src={imagePreview} className="h-full object-contain rounded shadow-lg" /> : <span className="text-sm font-bold text-blue-100 uppercase tracking-wide">Upload Intel</span>}</div>
                    <textarea value={description} onChange={(e) => setDescription(e.target.value)} placeholder="Mission Briefing..." className="w-full px-4 py-3 bg-white/10 border border-blue-300/30 rounded-lg focus:ring-2 focus:ring-white outline-none h-32 resize-none text-white placeholder-blue-200/50" />
                    <button onClick={generateEstimate} disabled={loading || (!image && !description)} className="w-full py-4 rounded-full font-bold bg-white text-brand-blue hover:bg-gray-100 shadow-lg">{loading ? "Analyzing..." : "Request Tactical Analysis"}</button>
                </div>
              </Reveal>
            </div>
            <AnimatePresence>{result && <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-brand-dark/80 backdrop-blur-lg" onClick={() => setResult(null)}><div className="bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]" onClick={e => e.stopPropagation()}><div className="bg-brand-blue p-5 text-white flex justify-between"><span className="font-bold uppercase tracking-widest text-sm">Mission Report Ready</span><button onClick={()=>setResult(null)}>X</button></div><div className="p-8 overflow-y-auto bg-gray-50"><div className="whitespace-pre-wrap font-sans text-brand-dark">{result}</div></div><div className="p-6 bg-white border-t border-gray-100"><button onClick={()=>{setResult(null); if(onBookNow) onBookNow();}} className="w-full bg-brand-green text-white font-bold py-4 rounded-full shadow-lg">Execute Mission</button></div></div></div>}</AnimatePresence>
          </Section>
        );
      };

      const Services = () => (
        <CollapsibleSection id="services" title="Mission Capabilities" subtitle="Full spectrum junk removal services." className="bg-transparent">
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
              {SERVICES.map((service, index) => (
                <Reveal key={service.title} delay={index * 0.05}>
                  <div className="bg-white/40 backdrop-blur-lg border border-white/30 p-6 rounded-lg shadow-lg text-center transform hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 h-full flex flex-col items-center justify-center min-h-[160px]">
                    <div className="flex justify-center mb-4"><svg className="w-12 h-12 text-brand-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={service.iconPath} /></svg></div>
                    <h3 className="font-bold text-lg text-brand-blue leading-tight">{service.title}</h3>
                  </div>
                </Reveal>
              ))}
            </div>
        </CollapsibleSection>
      );

      const JunkTargets = () => (
        <CollapsibleSection id="targets" title="Priority Targets" subtitle="Commonly neutralized items." className="bg-brand-light/50">
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
              {JUNK_TARGETS.map((target, index) => (
                <Reveal key={target.name} delay={index * 0.05}>
                  <div className="group relative overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-all duration-300 bg-white border border-gray-200 aspect-square">
                    <EditableImage imageKey={`target-${index}`} defaultSrc={target.imgSrc} alt={target.name} className="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700" />
                    <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 z-20"><h3 className="text-white font-bold font-heading text-lg tracking-wide uppercase drop-shadow-md">{target.name}</h3></div>
                  </div>
                </Reveal>
              ))}
            </div>
        </CollapsibleSection>
      );

      const Pricing = ({ onBookNow }) => (
        <Section id="pricing" className="bg-transparent">
            <div className="container mx-auto px-6"><div className="text-center mb-12"><Reveal><h2 className="text-3xl md:text-4xl font-extrabold font-heading text-brand-blue">Clear Pricing</h2></Reveal></div>
              <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8 items-stretch">
                {PRICING_PLANS.map((plan, index) => (
                  <Reveal key={plan.title} delay={index * 0.1}>
                    <div className="bg-white/40 backdrop-blur-lg border border-white/30 p-8 rounded-lg text-center h-full flex flex-col hover:-translate-y-2 hover:shadow-2xl transition-all">
                      <h3 className="font-heading text-2xl font-bold text-brand-blue mb-2">{plan.title}</h3>
                      <div className="text-5xl font-extrabold text-brand-blue mb-4">{plan.price}</div>
                      <p className="text-gray-600 flex-grow">{plan.description}</p>
                      <button onClick={() => onBookNow(plan)} className="mt-8 w-full rounded-full py-3 px-8 font-bold bg-brand-blue/20 text-brand-dark hover:bg-brand-blue/30">Book Now</button>
                    </div>
                  </Reveal>
                ))}
              </div>
            </div>
        </Section>
      );

      const Work = () => (
        <CollapsibleSection id="work" title="Mission Accomplished" subtitle="Before and after intelligence." className="bg-transparent">
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
              {WORK_EXAMPLES.map((example, index) => (
                <Reveal key={example.title} delay={index * 0.1}>
                  <div className="bg-white/40 backdrop-blur-lg rounded-lg shadow-lg overflow-hidden border border-white/30">
                    <div className="grid grid-cols-2 gap-px bg-gray-200">
                      <div className="relative h-48"><EditableImage imageKey={`work-before-${index}`} defaultSrc={example.beforeImg} alt="Before" className="w-full h-full" /><div className="absolute top-2 left-2 bg-black/50 text-white text-xs font-bold uppercase px-2 py-1 rounded z-10">Before</div></div>
                      <div className="relative h-48"><EditableImage imageKey={`work-after-${index}`} defaultSrc={example.afterImg} alt="After" className="w-full h-full" /><div className="absolute top-2 left-2 bg-brand-green text-white text-xs font-bold uppercase px-2 py-1 rounded z-10">After</div></div>
                    </div>
                    <div className="p-4"><h3 className="font-bold text-lg text-brand-blue">{example.title}</h3></div>
                  </div>
                </Reveal>
              ))}
            </div>
        </CollapsibleSection>
      );

      const About = () => (
        <CollapsibleSection id="about" title="Why Choose Us" subtitle="The Liberator Doctrine." className="bg-white/60 backdrop-blur-sm">
            <div className="grid md:grid-cols-2 gap-12 items-center">
              <Reveal delay={0.1}><div className="space-y-8"><p className="text-lg text-gray-600">We are a disciplined force dedicated to liberating you from the tyranny of clutter.</p><div className="flex items-start space-x-4"><IconCheck /><h3 className="text-lg font-bold text-brand-blue">Eco-Friendly Disposal</h3></div><div className="flex items-start space-x-4"><IconCheck /><h3 className="text-lg font-bold text-brand-blue">Licensed & Insured</h3></div></div></Reveal>
              <Reveal delay={0.2}><div className="relative h-96"><EditableImage imageKey="about-main" defaultSrc="https://images.unsplash.com/photo-1603796846097-b91524676348?q=80&w=800&auto=format&fit=crop" alt="Squad" className="relative rounded-lg shadow-2xl h-full border border-white/50" /></div></Reveal>
            </div>
        </CollapsibleSection>
      );

      const Team = () => (
        <CollapsibleSection id="team" title="Meet The Squad" subtitle="Elite team." className="bg-transparent">
            <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-8">
              {TEAM.map((member, index) => (
                <Reveal key={member.name} delay={index * 0.1}>
                  <div className="text-center p-6 bg-white/40 backdrop-blur-lg rounded-lg shadow-lg border border-white/30 h-full hover:-translate-y-2 transition-all">
                    <div className="relative w-32 h-32 mx-auto mb-4"><EditableImage imageKey={`team-${index}`} defaultSrc={member.imgSrc} alt={member.name} className="w-full h-full rounded-full shadow-md border-4 border-white/50" /></div>
                    <h3 className="text-xl font-bold font-heading text-brand-blue mb-1">{member.name}</h3><p className="text-brand-green font-semibold">{member.role}</p>
                  </div>
                </Reveal>
              ))}
            </div>
        </CollapsibleSection>
      );

      const Testimonials = () => (
         <CollapsibleSection id="reviews" title="Field Reports" subtitle="Intelligence from satisfied civilians." className="bg-brand-light border-t border-white/50">
              <div className="grid md:grid-cols-3 gap-8">{TESTIMONIALS.map((t, i) => (<Reveal key={t.id} delay={i * 0.1}><div className="bg-white p-6 rounded-lg shadow border-l-4 border-brand-green"><p className="italic text-gray-600 mb-4">"{t.text}"</p><p className="font-bold">{t.name}</p></div></Reveal>))}</div>
         </CollapsibleSection>
      );
      
      const FAQ = () => {
         const [openIndex, setOpenIndex] = useState(0);
         return (
            <CollapsibleSection id="faq" title="Tactical Briefing (FAQ)" subtitle="Mission protocols." className="bg-transparent">
                 {FAQS.map((faq, index) => (
                    <div key={index} className="mb-4 border bg-white rounded"><button className="w-full text-left p-4 font-bold" onClick={() => setOpenIndex(openIndex === index ? -1 : index)}>{faq.question}</button>{openIndex === index && <div className="p-4 border-t text-gray-600">{faq.answer}</div>}</div>
                 ))}
            </CollapsibleSection>
         );
      };

      const Contact = () => {
        const [formState, setFormState] = useState({ name: '', phone: '', address: '', description: '' });
        const [submitted, setSubmitted] = useState(false);
        const [isSending, setIsSending] = useState(false);

        const handleSubmit = async (e) => {
          e.preventDefault();
          setIsSending(true);
          try {
            await fetch("https://formsubmit.co/ajax/book@liberator.pro", {
              method: "POST",
              headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
              body: JSON.stringify({ _subject: "New Mission Request (Contact)", _template: "table", ...formState })
            });
            setSubmitted(true);
          } catch(err) { console.error(err); alert("Transmission failed. Please call."); }
          finally { setIsSending(false); }
        };

        return (
          <section id="contact" className="bg-brand-blue text-white py-20 relative overflow-hidden">
            <div className="container mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-12">
                <Reveal><div><h2 className="text-4xl font-extrabold mb-6">Ready to Be Liberated?</h2><p className="text-lg mb-8">Contact us today.</p></div></Reveal>
                <Reveal delay={0.2}><div className="bg-white/90 backdrop-blur-md rounded-xl p-8 text-brand-dark">
                  {submitted ? <div className="text-center py-10"><h3 className="text-2xl font-bold text-brand-blue mb-2">Transmission Received</h3><p>Stand by, Operative.</p></div> 
                  : <form onSubmit={handleSubmit} className="space-y-4">
                      <input type="text" placeholder="Name" className="w-full p-3 border rounded" onChange={e=>setFormState({...formState, name:e.target.value})} required />
                      <input type="tel" placeholder="Phone" className="w-full p-3 border rounded" onChange={e=>setFormState({...formState, phone:e.target.value})} required />
                      <input type="text" placeholder="Address" className="w-full p-3 border rounded" onChange={e=>setFormState({...formState, address:e.target.value})} />
                      <textarea placeholder="Payload Description" className="w-full p-3 border rounded h-32" onChange={e=>setFormState({...formState, description:e.target.value})} />
                      <button disabled={isSending} className="w-full bg-brand-green text-white font-bold p-4 rounded disabled:opacity-50">{isSending ? "Transmitting..." : "Transmit Request"}</button>
                    </form>}
                </div></Reveal>
            </div>
          </section>
        );
      };
      
      const Footer = ({ onAdminClick }) => <footer className="bg-brand-dark text-gray-300 py-12"><div className="container mx-auto px-6 flex justify-between"><span>LIBERATOR</span><button onClick={onAdminClick} className="text-xs">Admin</button></div></footer>;

      const PaymentModal = ({ plan, onClose }) => {
        const [isProcessing, setIsProcessing] = useState(false);
        const [isSuccess, setIsSuccess] = useState(false);
        const [info, setInfo] = useState({ name: '', phone: '' });

        const handleSubmit = async (e) => {
          e.preventDefault(); setIsProcessing(true);
          try {
            await fetch("https://formsubmit.co/ajax/book@liberator.pro", {
                method: "POST",
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify({ _subject: `New Booking: ${plan.title}`, _template: "table", plan: plan.title, price: plan.price, ...info })
            });
            setIsSuccess(true);
          } catch(e) { alert("Error sending booking."); } finally { setIsProcessing(false); }
        };

        return (<AnimatePresence><div className="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50" onClick={onClose}><motion.div initial={{scale:0.9}} animate={{scale:1}} className="bg-white p-8 rounded-lg max-w-md w-full" onClick={e=>e.stopPropagation()}>
          <button onClick={onClose} className="absolute top-3 right-3 text-gray-400">X</button>
          {isSuccess ? <div className="text-center"><h2 className="text-2xl font-bold mb-4">Confirmed!</h2><button onClick={onClose} className="bg-brand-blue text-white px-4 py-2 rounded">Close</button></div> : 
          <form onSubmit={handleSubmit} className="space-y-4">
            <h2 className="text-2xl font-bold mb-2">Book {plan.title}</h2>
            <div className="bg-yellow-50 p-2 text-xs text-yellow-800 border-l-4 border-yellow-400">Online Payments Coming Soon. Pay on site.</div>
            <input type="text" placeholder="Name" className="w-full p-2 border rounded" onChange={e=>setInfo({...info, name:e.target.value})} required />
            <input type="tel" placeholder="Phone" className="w-full p-2 border rounded" onChange={e=>setInfo({...info, phone:e.target.value})} required />
            <button disabled={isProcessing} className="w-full bg-brand-green text-white font-bold py-3 rounded">{isProcessing ? "Processing..." : "Confirm Booking"}</button>
          </form>}
        </motion.div></div></AnimatePresence>);
      };

      const BookingModal = ({ isOpen, onClose }) => { 
        const [step, setStep] = useState(1); 
        const [isProcessing, setIsProcessing] = useState(false);
        const [formData, setFormData] = useState({ date: 'today', address: '', name: '', phone: '', timeFrame: 'immediate' }); 
        
        const handleFinalSubmit = async (e) => {
           e.preventDefault(); setIsProcessing(true);
           try {
             await fetch("https://formsubmit.co/ajax/book@liberator.pro", {
                method: "POST",
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify({ _subject: "New Mission Booking", _template: "table", ...formData })
             });
             setStep(3);
           } catch(err) { console.error(err); alert("Transmission Failed"); } finally { setIsProcessing(false); }
        };

        return (<AnimatePresence>{isOpen && <div className="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50" onClick={onClose}><motion.div initial={{scale:0.9}} animate={{scale:1}} className="bg-white p-8 rounded-lg max-w-lg w-full" onClick={e=>e.stopPropagation()}>
          {step===1 ? <form onSubmit={e=>{e.preventDefault(); setStep(2);}} className="space-y-4">
            <h2 className="text-2xl font-bold mb-4 text-brand-blue">Mission Parameters</h2>
            <input type="text" placeholder="Target Address" className="w-full p-3 border rounded" onChange={e=>setFormData({...formData, address:e.target.value})} required />
            <div className="flex gap-2"><button type="button" onClick={()=>setFormData({...formData, date:'today'})} className={`flex-1 p-2 border ${formData.date==='today'?'bg-brand-blue text-white':'bg-white'}`}>TODAY</button><button type="button" onClick={()=>setFormData({...formData, date:'tomorrow'})} className={`flex-1 p-2 border ${formData.date==='tomorrow'?'bg-brand-blue text-white':'bg-white'}`}>TOMORROW</button></div>
            <input type="text" placeholder="Name" className="w-full p-3 border rounded" onChange={e=>setFormData({...formData, name:e.target.value})} required />
            <input type="tel" placeholder="Phone" className="w-full p-3 border rounded" onChange={e=>setFormData({...formData, phone:e.target.value})} required />
            <button className="w-full bg-brand-green text-white p-3 rounded font-bold">Next Step</button>
          </form> 
          : step===2 ? <form onSubmit={handleFinalSubmit} className="space-y-4">
             <h2 className="text-2xl font-bold mb-2">Confirm Logistics</h2>
             <div className="bg-yellow-50 p-3 text-sm text-yellow-800 border-l-4 border-yellow-400"><strong>Note:</strong> Online payments are disabled. Please pay via Cash/Card/Check upon mission completion.</div>
             <p className="text-gray-600">Deploying to: <strong>{formData.address}</strong></p>
             <button disabled={isProcessing} className="w-full bg-brand-green text-white p-3 rounded font-bold">{isProcessing ? "Transmitting..." : "Confirm Deployment"}</button>
             <button type="button" onClick={()=>setStep(1)} className="w-full text-gray-500 text-sm">Back</button>
          </form>
          : <div className="text-center"><h3 className="text-xl font-bold text-brand-blue mb-2">Operation Confirmed!</h3><p className="mb-4">HQ has received your transmission.</p><button onClick={onClose} className="bg-gray-200 px-6 py-2 rounded font-bold">Return to Base</button></div>}
        </motion.div></div>}</AnimatePresence>); 
      };

      const AdminLoginModal = ({ isOpen, onClose }) => { const [p, sP] = useState(''); const { login } = useAdmin(); return (<AnimatePresence>{isOpen && <div className="fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-[100]" onClick={onClose}><div className="bg-gray-800 p-8 rounded-lg" onClick={e=>e.stopPropagation()}><input type="password" value={p} onChange={e=>sP(e.target.value)} className="w-full mb-4 p-2 rounded" placeholder="Password" /><button onClick={() => { if(login(p)) onClose(); }} className="w-full bg-green-500 text-white p-2 rounded font-bold">Login</button></div></div>}</AnimatePresence>); };
      const UkraineBanner = () => <div className="bg-gradient-to-r from-blue-500 to-yellow-400 text-white py-2 text-center shadow-md font-bold text-sm">🇺🇦 We support Ukraine</div>;
      const USA_Banner = () => <div className="bg-gradient-to-r from-red-600 to-blue-700 text-white py-2 text-center shadow-md font-bold text-sm">🇺🇸 Free America</div>;
      const ScrollToTop = () => { const [v, sV] = useState(false); useEffect(() => { window.onscroll = () => sV(window.scrollY > 400); }, []); return v ? <button onClick={() => window.scrollTo({top:0, behavior:'smooth'})} className="fixed bottom-8 right-8 bg-brand-blue text-white w-10 h-10 rounded-full z-40 shadow-lg">^</button> : null; };

      const AppContent = () => {
        const [selectedPlan, setSelectedPlan] = useState(null);
        const [isBookingOpen, setIsBookingOpen] = useState(false);
        const [isEstimatorOpen, setIsEstimatorOpen] = useState(false);
        const [isAdminLoginOpen, setIsAdminLoginOpen] = useState(false);
        const [isHovered, setIsHovered] = useState(false);
        const [isWinter, setIsWinter] = useState(false);
        const [showSnow, setShowSnow] = useState(false);

        useEffect(() => { const m = new Date().getMonth(); const w = m === 11 || m <= 2; setIsWinter(w); if(w) setShowSnow(true); }, []);

        const handleBookNow = (plan) => {
           if(plan) setSelectedPlan(plan);
           else setIsBookingOpen(true);
        }

        return (
          <div className="font-sans text-brand-dark min-h-screen">
            <Snowfall isEnabled={showSnow} />
            <Header 
              isWinter={isWinter} 
              showSnow={showSnow} 
              onToggleSnow={() => setShowSnow(!showSnow)} 
              onOpenEstimator={() => setIsEstimatorOpen(true)}
            />
            <UkraineBanner />
            <main>
              <Hero onOpenEstimator={() => setIsEstimatorOpen(true)} />
              <Process />
              <AIEstimator onBookNow={() => setIsBookingOpen(true)} />
              <Services />
              <JunkTargets />
              <Pricing onBookNow={handleBookNow} />
              <Work />
              <Testimonials />
              <About />
              <Team />
              <FAQ />
              <Contact />
            </main>
            <USA_Banner />
            <Footer onAdminClick={() => setIsAdminLoginOpen(true)} />
            <ScrollToTop />
            
            <motion.button initial={{ y: 100, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ delay: 2 }} onClick={() => setIsBookingOpen(true)} onMouseEnter={() => setIsHovered(true)} onMouseLeave={() => setIsHovered(false)} className="fixed bottom-8 left-8 z-40 flex items-center space-x-2 bg-brand-green text-white px-6 py-4 rounded-full shadow-lg hover:scale-105 transition-all border-2 border-white min-w-[170px] justify-center">
              <span className="relative flex h-3 w-3"><span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span><span className="relative inline-flex rounded-full h-3 w-3 bg-white"></span></span>
              <span className="font-bold font-heading uppercase text-sm md:text-base">{isHovered ? "Book Mission Now" : "Liberate Me Now"}</span>
            </motion.button>

            <BookingModal isOpen={isBookingOpen} onClose={() => setIsBookingOpen(false)} />
            <AIEstimatorModal isOpen={isEstimatorOpen} onClose={() => setIsEstimatorOpen(false)} onBookNow={() => { setIsEstimatorOpen(false); setIsBookingOpen(true); }} />
            <AdminLoginModal isOpen={isAdminLoginOpen} onClose={() => setIsAdminLoginOpen(false)} />
            {selectedPlan && <PaymentModal plan={selectedPlan} onClose={() => setSelectedPlan(null)} />}
          </div>
        );
      };

      const AIEstimatorModal = ({ isOpen, onClose, onBookNow }) => {
        const [description, setDescription] = useState(''); const [image, setImage] = useState(null); const [imagePreview, setImagePreview] = useState(null); const [loading, setLoading] = useState(false); const [result, setResult] = useState(null); const fileInputRef = useRef(null);
        const handleFileChange = (e) => { if (e.target.files && e.target.files[0]) { const file = e.target.files[0]; setImage(file); const reader = new FileReader(); reader.onloadend = () => setImagePreview(reader.result); reader.readAsDataURL(file); } };
        const generateEstimate = async () => {
          if (!description && !image) return; 
          
          const apiKey = getApiKey();
          if (!apiKey) {
            setResult("Missing API key in browser – check config.js / GitHub secret.");
            return;
          }

          setLoading(true); 
          setResult(null);
          
          try {
            const ai = new GoogleGenAI({ apiKey });
            const parts = []; if (image) { const reader = new FileReader(); await new Promise(r => { reader.onloadend = () => { parts.push({ inlineData: { data: reader.result.split(',')[1], mimeType: image.type } }); r(); }; reader.readAsDataURL(image); }); }
            parts.push({ text: `Analyze intel. Estimate junk removal cost for: ${description}. Check for heavy items (concrete/piano) and add $0.20/lb surcharge. Show base + surcharge math.` });
            const response = await ai.models.generateContent({ model: 'gemini-2.5-flash', contents: { parts }, config: { systemInstruction: 'You are "The General". Concise. Show the math.', thinkingConfig: { thinkingBudget: 0 } } });
            setResult(response.text);
          } catch (e) {
            console.error("Gemini API error:", e);
            setResult("AI error – see console for details (check DevTools).");
          } finally {
            setLoading(false);
          }
        };
        return (
          <AnimatePresence>
            {isOpen && <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-brand-dark/70 backdrop-blur-md" onClick={onClose}>
              <motion.div initial={{opacity:0, scale:0.9}} animate={{opacity:1, scale:1}} exit={{opacity:0, scale:0.9}} className="bg-white w-full max-w-2xl rounded-xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col" onClick={e=>e.stopPropagation()}>
                 <div className="bg-brand-blue p-4 flex justify-between text-white"><span className="font-bold uppercase">Estimator</span><button onClick={onClose}>X</button></div>
                 <div className="p-6 overflow-y-auto flex-1">
                    {result ? <div className="whitespace-pre-wrap text-sm">{result}</div> : <div className="space-y-4">
                       <div onClick={() => fileInputRef.current?.click()} className="border-2 border-dashed p-4 text-center cursor-pointer bg-gray-50 h-32 flex items-center justify-center"><input type="file" ref={fileInputRef} onChange={handleFileChange} className="hidden" accept="image/*" />{imagePreview ? <img src={imagePreview} className="h-full object-contain" /> : <span className="text-gray-400 font-bold">UPLOAD IMAGE</span>}</div>
                       <textarea value={description} onChange={e=>setDescription(e.target.value)} placeholder="Describe items..." className="w-full p-2 border rounded h-24" />
                       <button onClick={generateEstimate} disabled={loading} className="w-full bg-brand-blue text-white font-bold py-3 rounded">{loading ? "Scanning..." : "Get Estimate"}</button>
                    </div>}
                 </div>
                 {result && <div className="p-4 border-t flex gap-2"><button onClick={onBookNow} className="flex-1 bg-brand-green text-white font-bold py-3 rounded">Book Now</button><button onClick={()=>setResult(null)} className="px-4 border rounded">Reset</button></div>}
              </motion.div>
            </div>}
          </AnimatePresence>
        );
      };

      const App = () => <AdminProvider><AppContent /></AdminProvider>;
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
